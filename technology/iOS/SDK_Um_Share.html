<!DOCTYPE html>
<html>
<head>
<title>SDK_Um_Share</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */
/* Author: Nicolas Hery - http://nicolashery.com */
/* Version: b13fe65ca28d2e568c6ed5d7f06581183df8f2ff */
/* Source: https://github.com/nicolahery/markdownpad-github */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

body {
  font-family: Helvetica, arial, freesans, clean, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  background-color: #fff;
  padding: 20px;
  max-width: 960px;
  margin: 0 auto;
}

body>*:first-child {
  margin-top: 0 !important;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  color: #000;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #ccc;
  color: #000;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777;
  font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #4183C4;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-left: 4px solid #DDD;
  padding: 0 15px;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/

table th {
  font-weight: bold;
}

table th, table td {
  border: 1px solid #ccc;
  padding: 6px 13px;
}

table tr {
  border-top: 1px solid #ccc;
  background-color: #fff;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

/* IMAGES
=============================================================================*/

img {
  max-width: 100%
}
</style>
</head>
<body>
<h3>å‹ç›Ÿåˆ†äº«</h3>
<p>è®¸å¤šæ¸¸æˆéƒ½æœ‰åˆ†äº«åŠŸèƒ½ï¼Œè¿™é‡Œæˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹å‹ç›Ÿåˆ†äº«çš„æ¥å…¥ã€‚<br />
æˆ‘æ¥å…¥çš„æ˜¯å‹ç›Ÿ<code>Unity3D v6.2.0</code>ç‰ˆæœ¬ã€‚å»<a href="http://dev.umeng.com/social/unity3d/sdk-download">è¿™é‡Œ</a>ä¸‹è½½ã€‚ä¸‹è½½å¥½åå°±å¼€å§‹æ¥å…¥å§ã€‚å…¶å®<a href="http://dev.umeng.com/social/unity3d/integration">å®˜ç½‘çš„æ¥å…¥æµç¨‹</a>è¿˜æ˜¯æŒºè¯¦ç»†çš„, ä¸è¿‡æˆ‘è¿˜æ˜¯è¦å•°å—¦ä¸€éğŸ˜   
</p>
<blockquote>
<h4>1.é¦–å…ˆå¯¼å…¥unityåŒ…ã€‚</h4>
<p><img src="./SDK/Um_share1.png" alt="Um_share1" />  
</p>
</blockquote>
<p>è¿™é‡Œæˆ‘åªéœ€è¦iOSç‰ˆé‡Œçš„QQã€Sinaå’Œå¾®ä¿¡çš„ç¬¬ä¸‰æ–¹SDKã€‚  
</p>
<blockquote>
<h4>2.å¼€å§‹è°ƒç”¨</h4>
<p>å®šä¹‰åˆ†äº«å¹³å°<br />
<code>Platform[] platforms = { Platform.QQ,Platform.QZONE,Platform.SINA,Platform.WEIXIN,Platform.WEIXIN_CIRCLE};</code><br />
è°ƒç”¨åˆ†äº«é¢æ¿<br />
<code>Social.OpenShareWithImagePath (platforms,&quot;Hello World&quot;, Application.persistentDataPath + &quot;/Sceenshot.png&quot;,&quot;umeng&quot;,&quot;http://www.umeng.com/&quot;, sharecallback);</code>  
</p>
<h4>æ³¨æ„âš ï¸ï¼š</h4>
<p>1)è¿™é‡ŒSceenshot.pngéœ€è¦é¢„å…ˆå­˜å‚¨åœ¨Application.persistentDataPathè·¯å¾„ä¸‹ã€‚  
</p>
<ul>
<li>ä¾‹å¦‚é‡‡ç”¨unityè‡ªå¸¦æˆªå±å‡½æ•°<code>Application.CaptureScreenshot(&quot;Sceenshot.png&quot;);</code>  
</li>
<li>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨C#é‡ŒSystem.IOå‘½åç©ºé—´ä¸‹çš„æ–‡ä»¶æ“ä½œå‡½æ•°è¿›è¡Œå†™å…¥</p>
<pre><code>public Texture2D ShareImage;
    if (!File.Exists (Application.persistentDataPath + &quot;/Sceenshot.png&quot;)) {
    File.WriteAllBytes (Application.persistentDataPath + &quot;/Sceenshot.png&quot;, ShareImage.EncodeToPNG ());
    Debug.Log (&quot;File.WriteAllBytes path =&quot; + Application.persistentDataPath + &quot;/Sceenshot.png&quot;);
    }
</code></pre>

</li>
</ul>
<p>2) è¿™é‡Œçš„sharecallbackæ˜¯åˆ†äº«çš„å›è°ƒï¼Œé‡Œé¢åŒ…å«æœ‰åˆ†äº«çš„å¹³å°ä¸é”™è¯¯ä»£ç ç­‰ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š  
</p>
<pre><code>public void sharecallback (Platform platform, int stCode, string errorMsg)
{
    Debug.Log (stCode.ToString () + &quot;-----&quot; + errorMsg);
    if (stCode == Social.SUCCESS) {
    ......
    }
}
</code></pre>

</blockquote>
<p>è°ƒç”¨ç»“æŸåå°±å¯ä»¥æ‰“åŒ…åˆ°Xcodeå·¥ç¨‹é‡Œäº†,ä»€ä¹ˆï¼Œä½ è¯´Keyå’Œsecretè¿˜æ²¡è®¾ç½®ï¼Œè¿™ä¸ªæ˜¯æ”¾åˆ°Xcodeé‡Œåˆå§‹åŒ–çš„ï¼Œå½“ç„¶åŸæ¥æ˜¯åœ¨unityé‡Œå°±å¯ä»¥åˆå§‹åŒ–äº†ã€‚è¿™æ¬¡å‹ç›ŸSDKæ›´æ–°çš„æœ‰ç‚¹å‘ã€‚ğŸ˜‚  
</p>
<blockquote>
<h4>3.unity5.0ä»¥ä¸‹ç‰ˆæœ¬</h4>
<p>å°äºunity5.0çš„ç‰ˆæœ¬è®°å¾—æŠŠPlugins-&gt;iOS-&gt;UMSocialæ–‡ä»¶å¤¹æ‹–åˆ°Xcodeå·¥ç¨‹é‡Œã€‚</p>
<h4>4.æ‰“åŒ…å¥½Xcodeå·¥ç¨‹åæ‰¾åˆ°UnityAppController.mmæ–‡ä»¶åšå‡ºå¦‚ä¸‹ä¿®æ”¹:</h4>
<p>å¤´æ–‡ä»¶æ·»åŠ ï¼š<br />
<code>#import &lt;UMSocialCore/UMSocialCore.h&gt;</code><br />
åœ¨<code>- (BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions</code> æ–¹æ³•ä¸­æ·»åŠ sdkçš„åˆå§‹åŒ–ä»£ç ï¼šï¼ˆå…¶ä¸­<code>[UMSocialGlobal shareInstance].type = @&quot;u3d&quot;</code>;å¿…é¡»è¦æ·»åŠ ï¼Œå¦åˆ™æ— æ³•å®šä½é”™è¯¯ï¼‰  
</p>
<p>[[UMSocialManager defaultManager] openLog:YES];
	NSLog(@&quot;UMeng social version: %@&quot;, [UMSocialGlobal umSocialSDKVersion]);
	[UMSocialGlobal shareInstance].type = @&quot;u3d&quot;;
	//è®¾ç½®å‹ç›Ÿappkey
	[[UMSocialManager defaultManager] 	setUmSocialAppkey:@&quot;57b432afe0f55a9832001a0a&quot;];
	//è®¾ç½®å¾®ä¿¡çš„appKeyå’ŒappSecret
	[[UMSocialManager defaultManager] setPlaform:UMSocialPlatformType<em>WechatSession appKey:@&quot;wxdc1e388c3822c80b&quot; appSecret:@&quot;3baf1193c85774b3fd9d18447d76cab0&quot; redirectURL:@&quot;http://mobile.umeng.com/social&quot;];
	//è®¾ç½®åˆ†äº«åˆ°QQäº’è”çš„appID
	[[UMSocialManager defaultManager] setPlaform:UMSocialPlatformType</em>QQ appKey:@&quot;100424468&quot;/<em>è®¾ç½®QQå¹³å°çš„appID</em>/  appSecret:nil redirectURL:@&quot;http://mobile.umeng.com/social&quot;];
	//è®¾ç½®æ–°æµªçš„appKeyå’ŒappSecret
	[[UMSocialManager defaultManager] setPlaform:UMSocialPlatformType_Sina appKey:@&quot;3921700954&quot;  appSecret:@&quot;04b48b094faeb16683c32669824ebdad&quot; redirectURL:@&quot;http://sns.whalecloud.com/sina2/callback&quot;];</p>
</blockquote>
<p>è¿™é‡Œçš„keyè¦è®°å¾—æ›¿æ¢ä¸ºè‡ªå·±ç”³è¯·çš„å“¦ã€‚<br />
åƒä¸‡ä¸‡ä¸‡æ³¨æ„åˆå§‹åŒ–å‹ç›Ÿçš„KeyğŸ˜­ä¸ç„¶ä½ çš„åˆ†äº«é¢æ¿ä¼šä¸€ç‰‡ç©ºç™½ï¼ï¼ï¼</p>
<blockquote>
<h4>5.<strong>å›è°ƒ:</strong></h4>
<p>è®°å¾—è¿˜è¦åœ¨<code>- (BOOL)application:(UIApplication*)application openURL:(NSURL*)url sourceApplication:(NSString*)sourceApplication annotation:(id)annotation</code>æ–¹æ³•ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š<br />
<code>BOOL result = [[UMSocialManager defaultManager] handleOpenURL:url];</code><br />
ä¸ç„¶å›è°ƒæ°¸è¿œä¹Ÿä¸ä¼šæˆåŠŸã€‚(åœ¨è¿™é‡Œè¸©è¿‡å‘ğŸ˜‚)  
</p>
<h4>6.è¿˜è¦æ·»åŠ ç¬¬ä¸‰æ–¹å¹³å°ä¾èµ–åº“</h4>
<p>åœ¨<strong>General-&gt;Linked Frameworks and Libraries</strong>ä¸‹æ·»åŠ <br />
ç³»ç»Ÿåº“ï¼š  
</p>
<pre><code>libsqlite3.tbd
CoreGraphics.framework  
</code></pre>

<p>å¾®ä¿¡ï¼š</p>
<pre><code>SystemConfiguration.framework
CoreTelephony.framework
libsqlite3.tbd
libc++.tbd
libz.tbd  
</code></pre>

<p>QQï¼š</p>
<pre><code>SystemConfiguration.framework
libc++.tbd  
</code></pre>

<p>æ–°æµªå¾®åšï¼š</p>
<pre><code>SystemConfiguration.framework
CoreTelephony.framework
ImageIO.framework
libsqlite3.tbd
libz.tbd
</code></pre>

<h4>7.Build Settings-&gt;Linking-&gt;Other Linker Flags è®¾ç½®-ObjC</h4>
<p><img src="./SDK/Um_share2.png" alt="Um_share2" />  
</p>
<h4>8.é…ç½®SSOç™½åå•</h4>
<p>å¦‚æœä½ çš„åº”ç”¨ä½¿ç”¨äº†å¦‚SSOæˆæƒç™»å½•æˆ–è·³è½¬åˆ°ç¬¬ä¸‰æ–¹åˆ†äº«åŠŸèƒ½ï¼Œåœ¨iOS9/10ä¸‹å°±éœ€è¦å¢åŠ ä¸€ä¸ªå¯è·³è½¬çš„ç™½åå•ï¼Œå³<code>LSApplicationQueriesSchemes</code>(<a href="./Xcode_config.html">è¯¦è§£è§Xcode_configç¬¬äºŒæ¡</a>.<br />
)ï¼Œå¦åˆ™å°†åœ¨SDKåˆ¤æ–­æ˜¯å¦è·³è½¬æ—¶ç”¨åˆ°çš„canOpenURLæ—¶è¿”å›NOï¼Œè¿›è€Œåªè¿›è¡Œwebviewæˆæƒæˆ–æˆæƒ/åˆ†äº«å¤±è´¥ã€‚ åœ¨é¡¹ç›®ä¸­çš„info.plistä¸­åŠ å…¥åº”ç”¨ç™½åå•ï¼Œå³é”®info.plisté€‰æ‹©source codeæ‰“å¼€(plistå…·ä½“è®¾ç½®åœ¨<code>Build Setting -&gt; Packaging -&gt; Info.plist File</code>å¯è·å–plistè·¯å¾„) è¯·æ ¹æ®é€‰æ‹©çš„å¹³å°å¯¹ä»¥ä¸‹é…ç½®è¿›è¡Œè£å‰ª:  
</p>
<pre><code>&lt;key&gt;LSApplicationQueriesSchemes&lt;/key&gt;
&lt;array&gt;
&lt;!-- å¾®ä¿¡ URL Scheme ç™½åå•--&gt;
&lt;string&gt;wechat&lt;/string&gt;
&lt;string&gt;weixin&lt;/string&gt;
&lt;!-- æ–°æµªå¾®åš URL Scheme ç™½åå•--&gt;
&lt;string&gt;sinaweibohd&lt;/string&gt;
&lt;string&gt;sinaweibo&lt;/string&gt;
&lt;string&gt;sinaweibosso&lt;/string&gt;
&lt;string&gt;weibosdk&lt;/string&gt;
&lt;string&gt;weibosdk2.5&lt;/string&gt;
&lt;!-- QQã€Qzone URL Scheme ç™½åå•--&gt;
&lt;string&gt;mqqapi&lt;/string&gt;
&lt;string&gt;mqq&lt;/string&gt;
&lt;string&gt;mqqOpensdkSSoLogin&lt;/string&gt;
&lt;string&gt;mqqconnect&lt;/string&gt;
&lt;string&gt;mqqopensdkdataline&lt;/string&gt;
&lt;string&gt;mqqopensdkgrouptribeshare&lt;/string&gt;
&lt;string&gt;mqqopensdkfriend&lt;/string&gt;
&lt;string&gt;mqqopensdkapi&lt;/string&gt;
&lt;string&gt;mqqopensdkapiV2&lt;/string&gt;
&lt;string&gt;mqqopensdkapiV3&lt;/string&gt;
&lt;string&gt;mqqopensdkapiV4&lt;/string&gt;
&lt;string&gt;mqzoneopensdk&lt;/string&gt;
&lt;string&gt;wtloginmqq&lt;/string&gt;
&lt;string&gt;wtloginmqq2&lt;/string&gt;
&lt;string&gt;mqqwpa&lt;/string&gt;
&lt;string&gt;mqzone&lt;/string&gt;
&lt;string&gt;mqzonev2&lt;/string&gt;
&lt;string&gt;mqzoneshare&lt;/string&gt;
&lt;string&gt;wtloginqzone&lt;/string&gt;
&lt;string&gt;mqzonewx&lt;/string&gt;
&lt;string&gt;mqzoneopensdkapiV2&lt;/string&gt;
&lt;string&gt;mqzoneopensdkapi19&lt;/string&gt;
&lt;string&gt;mqzoneopensdkapi&lt;/string&gt;
&lt;string&gt;mqqbrowser&lt;/string&gt;
&lt;/array&gt;  
</code></pre>

</blockquote>
<p>ä¸æ·»åŠ çš„è¯åˆ†äº«é¢æ¿æ˜¯ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥å¯¹åº”å¹³å°çš„å“¦ã€‚  
</p>
<blockquote>
<h4>9.URL Scheme</h4>
<p>URL Schemeæ˜¯ç”¨æ¥è·³è½¬APPçš„<br />
info-&gt;URL Types-&gt;+
<img src="./SDK/Um_share3.png" alt="Um_share3" /><br />
è¿™é‡Œè®¾ç½®QQçš„keyæ—¶æ³¨æ„æ˜¯<strong>â€œQQâ€+è…¾è®¯QQäº’è”åº”ç”¨appIDè½¬æ¢æˆåå…­è¿›åˆ¶ï¼ˆä¸è¶³8ä½å‰é¢è¡¥0ï¼‰</strong>  
</p>
<h4>10.Build Setting -&gt; Packaging -&gt; Info.plistæ·»åŠ HTTPä¼ è¾“å…è®¸</h4>
<p><key>NSAppTransportSecurity</key>
	<dict>
    <key>NSAllowsArbitraryLoads</key>
    <true/>
	</dict>  
</p>
<h4>11.é¢ã€‚ã€‚å·®ä¸å¤šäº†å§</h4>
<p>å¦‚æœåˆ†äº«çš„å›¾ç‰‡å‡ºç°å¦‚ä¸‹é—®é¢˜ï¼š<br />
<img src="./SDK/Um_share4.png" alt="Um_share4" /><br />
å¯ä»¥å°†æ£€æŸ¥ä¸‹<br />
<img src="./SDK/Um_share5.png" alt="Um_share5" /><br />
æ˜¯ä¸æ˜¯å›¾ç‰‡çš„å±æ€§æ²¡æœ‰è®¾ç½®æ­£ç¡®ã€‚ğŸ˜</p>
</blockquote>

</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->
