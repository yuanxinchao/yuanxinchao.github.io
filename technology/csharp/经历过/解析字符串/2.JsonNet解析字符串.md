#### JsonNet 解析字符串
**核心API**  

* `JsonConvert.SerializeObject(Obj);`
* `JsonConvert.DeserializeObject<T>(jsonString);`

封装一层后为  

	public class Json  {
	    private static readonly ArrayList _arrayList = new ArrayList(32);
	    public static string ToJsonString(params object[] objs)
	    {
	        _arrayList.Clear();
	        for (int i = 0; i < objs.Length; ++i)
	        {
	            _arrayList.Add(objs[i]);
	        }
	        return JsonConvert.SerializeObject(_arrayList);
	    }
	    public static T ToObject<T>(string jsonString)
	    {
	        return JsonConvert.DeserializeObject<T>(jsonString);
	    }
	}

使用：  

    private int pic=7;
    private int udid=10;
    private string str = "houhouhou";
	void Start ()
	{
        P_Mail pMail  = new P_Mail();
	    pMail.mtype = 3;
	    pMail.isread = 0;
	    pMail.reward = "成就达成";
	    pMail.mid = 213120;
        pMail.pMailDetail = new P_MailDetail();
	    pMail.pMailDetail.sendName = "Yuan";
        pMail.pMailDetail.receiveName = "Chen";
        pMail.pMailDetail.id = 8888;
        Debug.Log(Json.ToJsonString(pic, udid, str));
        //这里打印结果为  [7,10,"houhouhou"]
        string jsonpMail = Json.ToJsonString(pMail, pMail);
        Debug.Log(jsonpMail);
        List<P_Mail> newPMailList = Json.ToObject<List<P_Mail>>(jsonpMail);
        Debug.Log(newPMailList.Count);
        Debug.Log(newPMailList[0].pMailDetail.sendName);
	}
![](pic/1.png)

对应类：

	class P_Mail
	{
	    public P_MailDetail pMailDetail;
	    public int mtype; //邮件类型模板id - 见MailType
	    public string reward; //邮件可领取的奖励
	    public int isread; //是否阅读过
	    public int mid; //邮件guid
	}
	class P_MailDetail
	{
	    public string sendName;
	    public string receiveName;
	    public int id = 8888;
	}

注意：

* 序列化和反序列化类型前后应该严格对应。？
* 反序列化时字符串名称应与对应类型的变量名称对应
* 反序列化时 字符串名称 可以为 对应类型的变量名称的子集(即保证字符串里的的变量对应类型里存在即可)？