## AssetDatabase  
Editor在unity中对于文件的操作(导入，设置，加载等等)不推荐使用c#自带的filesystem(.IO)而是使用[AssetDatabase](https://docs.unity3d.com/ScriptReference/AssetDatabase.html)里的接口。最后还要记得AssetDatabase.Refresh()一下。  
下面就我接触到的几个api的使用做一个简单说明。   
 
* AssetDatabase.FindAssets  
* AssetDatabase.GUIDToAssetPath 
* AssetDatabase.LoadAssetAtPath  

上面三个api组合在一起是一个组合技。  
**举个栗子：**  

	using UnityEditor;
	using UnityEngine.UI;
	using UnityEngine;
	
	public static class TestAssetDatabase{
	    [MenuItem("TestAssetSearch/test")]
	    public static void SearchSomething()
	    {
	        Debug.Log("search");
	        EditorUtility.DisplayProgressBar("在Assets中查找", "开始查找", 0);
	        var guids = AssetDatabase.FindAssets("cfg t:GameObject");
	        for (int i = 0; i < guids.Length; i++)
	        {
	//            Debug.Log("guid=" + guids[i]);
	            string path = AssetDatabase.GUIDToAssetPath(guids[i]);
	            Debug.Log("path=" + path);
	            GameObject obj = AssetDatabase.LoadAssetAtPath<GameObject>(path);
	            Text t = obj.GetComponent<Text>();
	            Debug.Log(t.text);
	        }
	
	        EditorUtility.DisplayProgressBar("在Assets中查找", "???", 0.8f);
	        EditorUtility.ClearProgressBar();
	    }
	}
![](pic/1.png)  
>AssetDatabase.FindAssets返回guids，AssetDatabase.GUIDToAssetPath根据guid找到路径,AssetDatabase.LoadAssetAtPath根据路径加载预设,最后获取GameObject某个组件。  

>AssetDatabase.FindAssets参数，t: 代表type,上述代码如果没设置type则会把SqlData文件夹下的两个含"cfg_xxx"名字的一起找到，其他的标签还有Labels和Name可选。详细api见[官网](https://docs.unity3d.com/ScriptReference/AssetDatabase.FindAssets.html).

>上述一串代码实现了查找已经做好的pfb中文本文字的功能。当然也可以查找到自己挂在pfb脚本上某个序列化好的参数。更完善的接口在cs代码文件夹下。另外图中的进度条是EditorUtility.DisplayProgressBar()的使用。